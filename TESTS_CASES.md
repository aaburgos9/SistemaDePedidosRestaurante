## US-010

  -----------------------------------------------------------------------------------------------
  ID             Descripción       Pasos              Datos de Entrada   Resultado Esperado
  -------------- ----------------- ------------------ ------------------ ------------------------
  CP-US010-001   Cálculo Básico    1\. Recibir evento ID: "PEDIDO-001",  Tiempo estimado
                 con un solo tipo  de pedido          items: \[{nombre:  calculado como 4 minutos
                 de ítem simple    "PEDIDO-001". 2.   "Refresco",        (2+2×1). Estado del
                 (Partición        Microservicio      cantidad: 2}\]     pedido "PEDIDO-001"
                 Válida).          procesa el evento. (Tiempo/unidad: 1  cambia a "preparing".
                                                      min)               

  CP-US010-002   Cálculo Básico    1\. Recibir evento ID: "PEDIDO-002",  Tiempo estimado
                 con un solo tipo  de pedido          items: \[{nombre:  calculado como 5 minutos
                 de ítem medio     "PEDIDO-002". 2.   "Hamburguesa       (2+1×3). Estado del
                 (Partición        Microservicio      Clásica",          pedido "PEDIDO-002"
                 Válida).          procesa el evento. cantidad: 1}\]     cambia a "preparing".
                                                      (Tiempo/unidad: 3  
                                                      min)               

  CP-US010-003   Cálculo Básico    1\. Recibir evento ID: "PEDIDO-003",  Tiempo estimado
                 con un solo tipo  de pedido          items: \[{nombre:  calculado como 7 minutos
                 de ítem complejo  "PEDIDO-003". 2.   "Plato Especial    (2+1×5). Estado del
                 (Partición        Microservicio      del Chef",         pedido "PEDIDO-003"
                 Válida).          procesa el evento. cantidad: 1}\]     cambia a "preparing".
                                                      (Tiempo/unidad: 5  
                                                      min)               

  CP-US010-004   Cálculo con       1\. Recibir evento ID: "PEDIDO-004",  Tiempo estimado
                 múltiples tipos   de pedido          items: \[{nombre:  calculado como 12
                 de ítems          "PEDIDO-004". 2.   "Hamburguesa       minutos (2+1×3+2×1+1×5).
                 (Combinación      Microservicio      Clásica",          Estado del pedido
                 Válida DTT).      procesa el evento. cantidad: 1},      "PEDIDO-004" cambia a
                                                      {nombre:           "preparing".
                                                      "Refresco",        
                                                      cantidad: 2},      
                                                      {nombre: "Plato    
                                                      Especial del       
                                                      Chef", cantidad:   
                                                      1}\]               

  CP-US010-005   Pedido sin ítems  1\. Recibir evento ID: "PEDIDO-005",  Tiempo estimado
                 (Partición        de pedido          items: \[\]        calculado como 2 minutos
                 Inválida / Límite "PEDIDO-005". 2.                      (solo tiempo base).
                 Inferior BVA).    Microservicio                         Estado del pedido
                                   procesa el evento.                    "PEDIDO-005" cambia a
                                                                         "preparing".

  CP-US010-006   Pedido con        1\. Recibir evento ID: "PEDIDO-006",  Tiempo estimado
                 cantidad cero de  de pedido          items: \[{nombre:  calculado como 5 minutos
                 un ítem           "PEDIDO-006". 2.   "Hamburguesa       (2+1×3+0×1). Estado del
                 (Partición        Microservicio      Clásica",          pedido "PEDIDO-006"
                 Inválida / BVA).  procesa el evento. cantidad: 1},      cambia a "preparing".
                                                      {nombre:           
                                                      "Refresco",        
                                                      cantidad: 0}\]     

  CP-US010-007   Pedido con un     1\. Recibir evento ID: "PEDIDO-007",  Tiempo estimado
                 número muy grande de pedido          items: \[{nombre:  calculado como 102
                 de ítems (Límite  "PEDIDO-007". 2.   "Refresco",        minutos (2+100×1).
                 Superior BVA).    Microservicio      cantidad: 100}\]   Estado del pedido
                                   procesa el evento.                    "PEDIDO-007" cambia a
                                                                         "preparing".

  CP-US010-008   Pedido con un     1\. Recibir evento ID: "PEDIDO-008",  El sistema maneja el
                 ítem no           de pedido          items: \[{nombre:  ítem desconocido (ej.
                 reconocido en el  "PEDIDO-008". 2.   "Ítem              tiempo por defecto 0).
                 catálogo          Microservicio      Desconocido",      Tiempo de preparación
                 (Adivinación de   procesa el evento. cantidad: 1}\]     estimado calculado sin
                 Errores).                                               fallar. Estado del
                                                                         pedido "PEDIDO-008"
                                                                         cambia a "preparing". Se
                                                                         registra una
                                                                         alerta/error sobre el
                                                                         ítem no reconocido en
                                                                         logs.

  CP-US010-009   Pedido con        1\. Recibir evento ID: "PEDIDO-009",  El microservicio
                 estructura de     de pedido          Evento JSON mal    registra un error de
                 datos inválida    "PEDIDO-009". 2.   formado o faltan   procesamiento de evento.
                 (JSON mal         Microservicio      campos ("items" o  El estado del pedido
                 formado)          intenta procesar   "quantity").       "PEDIDO-009" no cambia
                 (Adivinación de   el evento.                            (permanece original o no
                 Errores).                                               se crea). Se notifica al
                                                                         sistema de monitoreo.

  CP-US010-010   Pedido con ID de  1\. Precondición:  ID: "PEDIDO-010",  El microservicio
                 pedido ya         Pedido             items: \[...\]     actualiza el pedido (si
                 existente en      "PEDIDO-010" en    (ej. 1             aplica) o ignora el
                 estado "pending"  estado "pending".  Hamburguesa).      duplicado. Estado del
                 (Adivinación de   2. Recibir evento                     pedido "PEDIDO-010"
                 Errores / Regla   duplicado                             cambia a "preparing" (si
                 Implícita).       "PEDIDO-010". 3.                      se procesa). Se registra
                                   Microservicio                         una advertencia sobre el
                                   procesa el evento.                    ID duplicado si no es
                                                                         una actualización
                                                                         esperada.

  CP-US010-011   Pedido con estado 1\. Precondición:  ID: "PEDIDO-011",  El microservicio ignora
                 inicial diferente Pedido             estado: "ready".   el evento o registra un
                 a "pending"       "PEDIDO-011" en                       error de estado. El
                 (Transición       estado "ready". 2.                    estado del pedido
                 Inválida STT).    Recibir evento                        "PEDIDO-011" permanece
                                   para procesar el                      en "ready".
                                   pedido                                
                                   "PEDIDO-011".                         

  CP-US010-012   Cálculo con       1\. Precondición:  ID: "PEDIDO-012",  El sistema maneja el
                 tiempo de         Ítem configurado   items: \[{nombre:  tiempo negativo (ej.
                 preparación       con tiempo de −1   "Ítem Negativo",   trata como 0 o lanza
                 negativo para un  min. 2. Recibir    cantidad: 1}\]     error). Tiempo estimado
                 ítem (Adivinación evento de pedido   (Tiempo/unidad: −1 calculado correctamente
                 de Errores /      "PEDIDO-012" con   min)               sin valores negativos.
                 BVA).             ese ítem. 3.                          Estado del pedido
                                   Microservicio                         "PEDIDO-012" cambia a
                                   procesa el evento.                    "preparing". Se registra
                                                                         una alerta sobre la
                                                                         configuración de tiempo
                                                                         inválida.

  CP-US010-013   Falla en la       1\. Recibir evento ID: "PEDIDO-013",  El microservicio
                 conexión a la     de pedido          items: \[...\]     registra un error de
                 base de datos     "PEDIDO-013". 2.   (ej. 1 Refresco).  conexión/actualización
                 durante el        Base de datos      Falla de conexión  de DB. El estado del
                 procesamiento     falla la conexión  a DB.              pedido "PEDIDO-013" no
                 (Adivinación de   al intentar                           cambia. Se notifica al
                 Errores).         actualizar el                         sistema de monitoreo
                                   estado. 3.                            sobre la falla crítica.
                                   Microservicio                         
                                   procesa el evento.                    

  CP-US010-014   Finalización      1\. Precondición:  ID: "PEDIDO-014",  El estado del pedido
                 exitosa del       Pedido             estado:            "PEDIDO-014" cambia a
                 tiempo de         "PEDIDO-014" en    "preparing",       "ready" en la base de
                 preparación       estado "preparing" tiempo_estimado: 1 datos.
                 (Transición       con 1 min          min.               
                 Válida STT).      estimado. 2. El                       
                                   tiempo de                             
                                   preparación                           
                                   simulado finaliza.                    

  CP-US010-015   Finalización con  1\. Precondición:  ID: "PEDIDO-015",  El estado del pedido
                 tiempo de         Pedido             estado:            "PEDIDO-015" cambia a
                 preparación muy   "PEDIDO-015" en    "preparing",       "ready" en la base de
                 corto (Límite     estado "preparing" tiempo_estimado: 0 datos.
                 Inferior BVA).    con 0 segundos     segundos.          
                                   estimado. 2. El                       
                                   tiempo de                             
                                   preparación                           
                                   simulado finaliza                     
                                   inmediatamente.                       

  CP-US010-016   Finalización con  1\. Precondición:  ID: "PEDIDO-016",  El estado del pedido
                 tiempo de         Pedido             estado:            "PEDIDO-016" cambia a
                 preparación muy   "PEDIDO-016" en    "preparing",       "ready" en la base de
                 largo (Límite     estado "preparing" tiempo_estimado:   datos.
                 Superior BVA).    con 120 min        120 min.           
                                   estimado. 2. El                       
                                   tiempo de                             
                                   preparación                           
                                   simulado finaliza.                    

  CP-US010-017   Pedido ya en      1\. Precondición:  ID: "PEDIDO-017",  El estado del pedido
                 estado "ready" al Pedido             estado: "ready".   "PEDIDO-017" permanece
                 finalizar         "PEDIDO-017" en                       en "ready". Se registra
                 simulación        estado "ready". 2.                    una advertencia/error
                 (Transición       El mecanismo de                       indicando que ya estaba
                 Inválida STT /    simulación intenta                    en el estado final
                 Adivinación de    finalizar su                          esperado.
                 Errores).         tiempo.                               

  CP-US010-018   Pedido en estado  1\. Precondición:  ID: "PEDIDO-018",  El estado del pedido
                 "completed" al    Pedido             estado:            "PEDIDO-018" permanece
                 finalizar         "PEDIDO-018" en    "completed".       en "completed". Se
                 simulación        estado                                registra una
                 (Transición       "completed". 2. El                    advertencia/error
                 Inválida STT /    mecanismo de                          indicando que ya estaba
                 Adivinación de    simulación intenta                    en un estado final.
                 Errores).         finalizar su                          
                                   tiempo.                               

  CP-US010-019   Error al          1\. Precondición:  ID: "PEDIDO-019",  El microservicio
                 actualizar la     Pedido             estado:            registra un error de
                 base de datos al  "PEDIDO-019" en    "preparing". Falla conexión/actualización
                 finalizar         estado             de conexión a DB.  de DB. El estado del
                 simulación        "preparing",                          pedido "PEDIDO-019"
                 (Adivinación de   tiempo de                             permanece en
                 Errores).         simulación                            "preparing". Se
                                   finalizado. 2.                        reintenta la operación o
                                   Base de datos                         se notifica al
                                   falla al intentar                     monitoreo.
                                   cambiar el estado                     
                                   a "ready".                            

  CP-US010-020   Múltiples pedidos 1\. Precondición:  ID: "PEDIDO-020A", Ambos pedidos cambian su
                 finalizando       Pedidos            ID: "PEDIDO-020B", estado a "ready"
                 simultáneamente   "PEDIDO-020A" y    estado:            correctamente. No hay
                 (Adivinación de   "PEDIDO-020B" en   "preparing".       conflictos de
                 Errores /         estado                                concurrencia en la
                 Concurrencia).    "preparing". 2.                       actualización de la base
                                   Sus tiempos de                        de datos.
                                   preparación                           
                                   simulados                             
                                   finalizan                             
                                   simultáneamente.                      

  CP-US010-021   Reinicio del      1\. Precondición:  ID: "PEDIDO-021",  Al reiniciar, el
                 microservicio     Pedido             estado:            microservicio recupera
                 durante la        "PEDIDO-021" en    "preparing",       el estado y
                 simulación de     estado "preparing" Tiempo de          reanuda/recalcula el
                 tiempo            con tiempo en      simulación en      tiempo restante. El
                 (Adivinación de   curso. 2. El       curso.             estado del pedido
                 Errores /         microservicio se                      "PEDIDO-021"
                 Resiliencia).     reinicia. 3. El                       eventualmente cambia a
                                   microservicio                         "ready".
                                   arranca de nuevo.                     

  CP-US010-022   Pedido eliminado  1\. Precondición:  ID: "PEDIDO-022",  El microservicio detecta
                 mientras está en  Pedido             estado:            que el pedido no existe.
                 estado            "PEDIDO-022" en    "preparing" (antes Registra una
                 "preparing"       estado             de ser eliminado). advertencia/error de
                 (Adivinación de   "preparing",                          pedido no encontrado. No
                 Errores).         tiempo en curso.                      intenta actualizar un
                                   2. El pedido                          pedido inexistente.
                                   "PEDIDO-022" es                       
                                   eliminado de la DB                    
                                   externamente. 3.                      
                                   El tiempo de                          
                                   simulación                            
                                   finaliza.                             

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         

                                                                         
  -----------------------------------------------------------------------------------------------

## US-011

  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  ID             Descripción      Pasos             Datos de        Resultado Esperado                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None
                                                    Entrada                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
  -------------- ---------------- ----------------- --------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------
  CP-US011-001   Actualización    1\. El            ID del pedido:  El pedido "PEDIDO-001" en MongoDB se actualiza con los ítems: \[ { "nombre": "Refresco", "cantidad": 1 }, { "nombre": "Hamburguesa Clásica", "cantidad": 1 } \].Se emite un evento ORDER_UPDATED vía WebSocket con el ID "PEDIDO-001" y los ítems actualizados.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                 exitosa - Añadir microservicio     "PEDIDO-001",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                 ítems a pedido   Node.js recibe un Estado inicial:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                 pendiente (EP -  mensaje de        "pending",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                 Partición        actualización     Ítems                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                 Válida)          para el ID        iniciales: \[ {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                  "PEDIDO-001" con  "nombre":                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                  el nuevo ítem.    "Refresco",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                    "cantidad": 1 }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                    \], Ítems a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                    añadir: \[ {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                    "nombre":                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                    "Hamburguesa                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                    Clásica",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                    "cantidad": 1 }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                    \]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     

  CP-US011-002   Actualización    1\. El            ID del pedido:  El pedido "PEDIDO-002" en MongoDB se actualiza con los ítems: \[ { "nombre": "Refresco", "cantidad": 2 }, { "nombre": "Hamburguesa Clásica", "cantidad": 1 }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                 exitosa -        microservicio     "PEDIDO-002",   \]$.<br>Se emite un evento ORDER_UPDATED`vía WebSocket con el ID "PEDIDO-002" y los ítems actualizados. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-004 | Actualización exitosa - Cambiar nombre de cliente y mesa en pedido pendiente (EP - Partición Válida) | 1. El microservicio Node.js recibe un mensaje de actualización para el ID "PEDIDO-004" con el nuevo cliente y mesa. | ID del pedido: "PEDIDO-004", Estado inicial: "pending", Cliente inicial: "Juan Pérez", Mesa inicial: "5", Nuevo cliente: "María García", Nueva mesa: "7" | El pedido "PEDIDO-004" en MongoDB se actualiza con cliente "María García" y mesa "7".Se emite un evento ORDER_UPDATED vía WebSocket con el ID "PEDIDO-004" y los datos actualizados. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-005 | Actualización exitosa - Pedido queda sin ítems en estado pendiente (BVA - Límite Inferior) | 1. El microservicio Node.js recibe un mensaje de actualización para el ID "PEDIDO-005" eliminando todos los ítems. | ID del pedido: "PEDIDO-005", Estado inicial: "pending", Ítems iniciales: [ { "nombre": "Refresco", "cantidad": 1 } ], Ítems a eliminar: todos | El pedido "PEDIDO-005" en MongoDB se actualiza con una lista de ítems vacía.Se emite un evento ORDER_UPDATED vía WebSocket con el ID "PEDIDO-005" y la lista de ítems vacía. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-006 | Intento de actualización de pedido en estado "preparing" (STT - Transición Inválida) | 1. El microservicio Node.js recibe un mensaje de actualización para el ID "PEDIDO-006". | ID del pedido: "PEDIDO-006", Estado inicial: "preparing", Operación: Añadir un ítem | El estado del pedido "PEDIDO-006" permanece en "preparing".El pedido "PEDIDO-006" en MongoDB no se modifica.No se emite ningún evento ORDER_UPDATED vía WebSocket para "PEDIDO-006".Se registra una advertencia o error indicando que el pedido no puede ser modificado en su estado actual. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-007 | Intento de actualización de pedido en estado "ready" (STT - Transición Inválida) | 1. El microservicio Node.js recibe un mensaje de actualización para el ID "PEDIDO-007". | ID del pedido: "PEDIDO-007", Estado inicial: "ready", Operación: (cualquier modificación) | El estado del pedido "PEDIDO-007" permanece en "ready".El pedido "PEDIDO-007" en MongoDB no se modifica.No se emite ningún evento ORDER_UPDATED vía WebSocket para "PEDIDO-007".Se registra una advertencia o error. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-008 | Intento de actualización de pedido en estado "completed" (STT - Transición Inválida) | 1. El microservicio Node.js recibe un mensaje de actualización para el ID "PEDIDO-008". | ID del pedido: "PEDIDO-008", Estado inicial: "completed", Operación: (cualquier modificación) | El estado del pedido "PEDIDO-008" permanece en "completed".El pedido "PEDIDO-008" en MongoDB no se modifica.No se emite ningún evento ORDER_UPDATED vía WebSocket para "PEDIDO-008".Se registra una advertencia o error. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-009 | Intento de actualización de pedido con ID inexistente (Adivinación de Errores) | 1. El microservicio Node.js recibe un mensaje de actualización para un ID: "PEDIDO-009". | ID del pedido: "PEDIDO-009", Existencia en DB: No existe | No se crea un nuevo pedido en MongoDB.No se emite ningún evento ORDER_UPDATED vía WebSocket.Se registra un error indicando que el pedido no fue encontrado. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-010 | Mensaje de actualización con formato inválido (JSON mal formado) (Adivinación de Errores) | 1. El microservicio Node.js recibe un mensaje de actualización con formato inválido para el ID "PEDIDO-010". | ID del pedido: "PEDIDO-010", Mensaje de entrada: JSON mal formado | El pedido "PEDIDO-010" en MongoDB no se modifica.No se emite ningún evento ORDER_UPDATED vía WebSocket.Se registra un error de procesamiento del mensaje. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-011 | Mensaje de actualización con campos obligatorios faltantes (Adivinación de Errores) | 1. El microservicio Node.js recibe un mensaje de actualización para el ID "PEDIDO-011" donde falta la lista de ítems o la cantidad. | ID del pedido: "PEDIDO-011", Mensaje de entrada: Falta la lista de ítems o la cantidad de un ítem | El pedido "PEDIDO-011" en MongoDB no se modifica.No se emite ningún evento ORDER_UPDATED vía WebSocket.Se registra un error de validación del mensaje. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-012 | Mensaje de actualización con cantidad negativa para un ítem (BVA - Límite Inválido) | 1. El microservicio Node.js recibe un mensaje de actualización para el ID "PEDIDO-012" intentando cambiar la cantidad de "Refresco" a -1. | ID del pedido: "PEDIDO-012", Modificación: Cantidad de "Refresco" = -1 (valor negativo) | El pedido "PEDIDO-012" en MongoDB no se modifica.No se emite ningún evento ORDER_UPDATED vía WebSocket.Se registra un error de validación de cantidad. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-013 | Mensaje de actualización con ítem no reconocido en el catálogo (Adivinación de Errores) | 1. El microservicio Node.js recibe un mensaje de actualización para el ID "PEDIDO-013" añadiendo un "Ítem Desconocido". | ID del pedido: "PEDIDO-013", Ítem añadido: "Ítem Desconocido" (no existe en catálogo) | El pedido "PEDIDO-013" en MongoDB no se modifica para incluir el ítem desconocido.No se emite ningún evento ORDER_UPDATED vía WebSocket (o se emite con los ítems válidos si hay filtrado).Se registra una advertencia o error sobre el ítem no reconocido. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-014 | Falla en la conexión a MongoDB durante la actualización (Adivinación de Errores) | 1. El microservicio Node.js recibe un mensaje de actualización para el ID "PEDIDO-014". | ID del pedido: "PEDIDO-014", Falla simulada: Pérdida de conexión a MongoDB | El microservicio registra un error de conexión/actualización de base de datos.El pedido "PEDIDO-014" en MongoDB no se modifica.No se emite ningún evento ORDER_UPDATED vía WebSocket.Se notifica al sistema de monitoreo sobre la falla. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-015 | Falla en la emisión del evento WebSocket después de una actualización exitosa (Adivinación de Errores) | 1. El microservicio Node.js recibe un mensaje de actualización para el ID "PEDIDO-015". | ID del pedido: "PEDIDO-015", Falla simulada: Pérdida de conexión al servidor WebSocket (después de DB update exitoso) | El pedido "PEDIDO-015" en MongoDB se actualiza correctamente.El microservicio registra un error de emisión de evento WebSocket.No se emite ningún evento ORDER_UPDATED vía WebSocket.Se notifica al sistema de monitoreo sobre la falla de comunicación. | | | | | | | | | | | | | | | | | | | | | | | CP-US011-016 | Concurrencia - Dos actualizaciones simultáneas para el mismo pedido pendiente (Adivinación de Errores) | 1. El microservicio recibe simultáneamente Mensaje 1 (añadir ítem) y Mensaje 2 (modificar cantidad) para el ID "PEDIDO-016". | ID del pedido: "PEDIDO-016", Estado inicial: "pending", Actualización 1: Añadir { "nombre": "Hamburguesa Clásica", "cantidad": 1 }, Actualización 2: Modificar { "nombre": "Refresco", "cantidad": 2 }, Operación: Concurrencia | El pedido "PEDIDO-016" en MongoDB refleja el resultado de ambas actualizaciones aplicadas de forma consistente: [ { "nombre": "Refresco", "cantidad": 2 }, { "nombre": "Hamburguesa Clásica", "cantidad": 1 } ]$.`<br>`{=html}Se                                                                                                                                               
                 Modificar        Node.js recibe un Estado inicial: emite un evento ORDER_UPDATED\` vía WebSocket que refleja el estado final consistente del pedido.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                 cantidad de ítem mensaje de        "pending",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                 en pedido        actualización     Ítems                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                 pendiente (EP -  para el ID        iniciales: \[ {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                 Partición        "PEDIDO-002"      "nombre":                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                 Válida)          cambiando la      "Refresco",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                  cantidad de       "cantidad": 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                  "Refresco".       }, { "nombre":                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                    "Hamburguesa                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                    Clásica",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                    "cantidad": 1 }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                    \],                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                    Modificación:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                    Cambiar                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                    cantidad de                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                    "Refresco" a 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         

  CP-US011-017   Concurrencia -   1\. El            ID del pedido:  El sistema debe garantizar que la regla de negocio se respeta: si el estado cambia a "preparing" antes de que la actualización se procese, la actualización es rechazada.Si la actualización se procesa antes del cambio de estado, el pedido se actualiza y luego pasa a "preparing".Se registra la secuencia de eventos y el resultado final consistente en los logs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                 Actualización y  microservicio     "PEDIDO-017",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                 cambio de estado recibe            Evento 1:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                 a "preparing"    simultáneamente   Actualización                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                 simultáneos      un mensaje de     (ej. añadir un                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                 (Adivinación de  actualización y   ítem), Evento                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                 Errores)         un mensaje de     2: Cambio de                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                  cambio de estado  estado a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                  a "preparing"     "preparing",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                  para el ID        Regla de                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                  "PEDIDO-017".     negocio: Solo                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                    se modifica en                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                    estado                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                    "pending"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## US-022

  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  ID             Descripción       Pasos                        Datos de Entrada                  Resultado Esperado                None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None
  -------------- ----------------- ---------------------------- --------------------------------- --------------------------------- ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------
  CP-US022-001   Carga exitosa de  1\. Iniciar el microservicio MongoDB: Estrategia de cálculo de La estrategia "ESTRATEGIA-SIMPLE"                                                                                                                                             
                 una estrategia    Node.js. 2. El microservicio tiempo válida con ID              se carga correctamente desde                                                                                                                                                  
                 válida al iniciar intenta cargar la estrategia "ESTRATEGIA-SIMPLE" y código      MongoDB. El microservicio puede                                                                                                                                               
                 (EP - Partición   desde MongoDB.               ejecutable.                       utilizar la lógica de                                                                                                                                                         
                 Válida)                                                                          "ESTRATEGIA-SIMPLE" para calcular                                                                                                                                             
                                                                                                  tiempos de preparación.                                                                                                                                                       

  CP-US022-002   Carga exitosa de  1\. Iniciar el microservicio MongoDB: Múltiples estrategias de Todas las estrategias válidas se                                                                                                                                              
                 múltiples         Node.js. 2. El microservicio cálculo de tiempo válidas (ej.    cargan correctamente desde                                                                                                                                                    
                 estrategias       intenta cargar todas las     "ESTRATEGIA-SIMPLE",              MongoDB. El microservicio puede                                                                                                                                               
                 válidas al        estrategias desde MongoDB.   "ESTRATEGIA-COMPLEJA") con código seleccionar y utilizar cualquiera                                                                                                                                             
                 iniciar (EP -                                  ejecutable.                       de las lógicas cargadas para                                                                                                                                                  
                 Partición Válida)                                                                calcular tiempos de preparación.                                                                                                                                              

  CP-US022-003   Carga cuando no   1\. Iniciar el microservicio MongoDB: Colección de estrategias El microservicio no carga ninguna                                                                                                                                             
                 hay estrategias   Node.js. 2. El microservicio vacía.                            estrategia dinámica. El                                                                                                                                                       
                 en MongoDB (EG -  intenta cargar estrategias                                     microservicio utiliza una                                                                                                                                                     
                 Ausencia de       de MongoDB.                                                    estrategia de cálculo de tiempo                                                                                                                                               
                 Datos)                                                                           por defecto o de fallback. Se                                                                                                                                                 
                                                                                                  registra una advertencia en los                                                                                                                                               
                                                                                                  logs indicando la ausencia de                                                                                                                                                 
                                                                                                  estrategias dinámicas.                                                                                                                                                        

  CP-US022-004   Carga con una     1\. Iniciar el microservicio MongoDB: Estrategia con ID        La estrategia                                                                                                                                                                 
                 estrategia con    Node.js. 2. El microservicio "ESTRATEGIA-INVALIDA" cuyo campo  "ESTRATEGIA-INVALIDA" no se carga                                                                                                                                             
                 código            intenta cargar la estrategia code contiene un string con       correctamente. El microservicio                                                                                                                                               
                 sintácticamente   desde MongoDB.               sintaxis JavaScript inválida.     registra un error de sintaxis al                                                                                                                                              
                 inválido (EG -                                                                   intentar procesar el código. El                                                                                                                                               
                 Datos Inválidos)                                                                 microservicio utiliza una                                                                                                                                                     
                                                                                                  estrategia de cálculo de tiempo                                                                                                                                               
                                                                                                  por defecto o de fallback. Se                                                                                                                                                 
                                                                                                  registra un error detallado en                                                                                                                                                
                                                                                                  los logs.                                                                                                                                                                     

  CP-US022-005   Carga con una     1\. Iniciar el microservicio MongoDB: Estrategia con ID        La estrategia                                                                                                                                                                 
                 estrategia con    Node.js. 2. El microservicio "ESTRATEGIA-SEMANTICA-INVALIDA"   "ESTRATEGIA-SEMANTICA-INVALIDA"                                                                                                                                               
                 código            intenta cargar la estrategia cuyo campo code es                no se carga correctamente o no es                                                                                                                                             
                 semánticamente    desde MongoDB.               sintácticamente válido pero no    utilizable. El microservicio                                                                                                                                                  
                 inválido (EG -                                 cumple con la interfaz esperada.  registra un error de validación                                                                                                                                               
                 Datos Inválidos)                                                                 de la interfaz de la estrategia.                                                                                                                                              
                                                                                                  El microservicio utiliza una                                                                                                                                                  
                                                                                                  estrategia de cálculo de tiempo                                                                                                                                               
                                                                                                  por defecto o de fallback. Se                                                                                                                                                 
                                                                                                  registra un error detallado en                                                                                                                                                
                                                                                                  los logs.                                                                                                                                                                     

  CP-US022-006   Falla en la       1\. Iniciar el microservicio Entorno: Conexión a MongoDB       El microservicio registra un                                                                                                                                                  
                 conexión a        Node.js. 2. El microservicio fallida o la base de datos no     error crítico de conexión a la                                                                                                                                                
                 MongoDB al        intenta conectar y cargar    está disponible.                  base de datos. El microservicio                                                                                                                                               
                 iniciar (EG -     estrategias de MongoDB.                                        utiliza una estrategia de cálculo                                                                                                                                             
                 Resiliencia)                                                                     de tiempo por defecto o de                                                                                                                                                    
                                                                                                  fallback. El microservicio                                                                                                                                                    
                                                                                                  continúa su operación.                                                                                                                                                        

  CP-US022-007   Estrategia con    1\. Iniciar el microservicio MongoDB: Estrategia con ID        El mecanismo de carga de código                                                                                                                                               
                 código malicioso  Node.js. 2. El microservicio "ESTRATEGIA-MALICIOSA" cuyo campo dinámico previene la ejecución de                                                                                                                                             
                 o peligroso (EG - intenta cargar y ejecutar la code contiene código peligroso    código peligroso (sandboxing,                                                                                                                                                 
                 Seguridad)        estrategia                   (ej. process.exit()).             validación de permisos). El                                                                                                                                                   
                                   "ESTRATEGIA-MALICIOSA".                                        microservicio registra una alerta                                                                                                                                             
                                                                                                  de seguridad. La estrategia                                                                                                                                                   
                                                                                                  "ESTRATEGIA-MALICIOSA" no se                                                                                                                                                  
                                                                                                  carga o se inhabilita.                                                                                                                                                        

  CP-US022-008   Estrategia con    1\. Iniciar el microservicio MongoDB: Estrategia con ID        La estrategia                                                                                                                                                                 
                 dependencias      Node.js. 2. El microservicio "ESTRATEGIA-CON-DEP" cuyo campo   "ESTRATEGIA-CON-DEP" no se carga                                                                                                                                              
                 externas no       intenta cargar la estrategia code intenta importar un módulo   correctamente debido a un error                                                                                                                                               
                 resueltas (EG -   "ESTRATEGIA-CON-DEP".        Node.js no instalado.             de módulo no encontrado. El                                                                                                                                                   
                 Dependencias)                                                                    microservicio registra un error                                                                                                                                               
                                                                                                  de dependencia. El microservicio                                                                                                                                              
                                                                                                  utiliza una estrategia de cálculo                                                                                                                                             
                                                                                                  de tiempo por defecto o de                                                                                                                                                    
                                                                                                  fallback.                                                                                                                                                                     

  CP-US022-009   Estrategia con un 1\. Iniciar el microservicio MongoDB: Estrategia con ID        La estrategia "ESTRATEGIA-GRANDE"                                                                                                                                             
                 tamaño de código  Node.js. 2. El microservicio "ESTRATEGIA-GRANDE" cuyo campo    se carga correctamente (si el                                                                                                                                                 
                 excesivamente     intenta cargar la estrategia code es un string de varios       sistema lo soporta). El tiempo de                                                                                                                                             
                 grande (BVA -     "ESTRATEGIA-GRANDE".         megabytes.                        inicio del microservicio no se ve                                                                                                                                             
                 Límite Superior /                                                                afectado negativamente de forma                                                                                                                                               
                 EG - Rendimiento)                                                                crítica. El uso de memoria se                                                                                                                                                 
                                                                                                  mantiene dentro de límites                                                                                                                                                    
                                                                                                  aceptables. Se registra una                                                                                                                                                   
                                                                                                  advertencia si el tamaño del                                                                                                                                                  
                                                                                                  código excede un umbral.                                                                                                                                                      

  CP-US022-010   Actualización de  1\. Iniciar el microservicio MongoDB: Estrategia               El microservicio sigue utilizando                                                                                                                                             
                 una estrategia en y verificar que cargó        "ESTRATEGIA-ACTUALIZABLE"         la versión de la estrategia                                                                                                                                                   
                 MongoDB después   "ESTRATEGIA-ACTUALIZABLE".   modificada después del inicio del cargada al inicio. La nueva                                                                                                                                                   
                 del inicio (EG -  2. Modificar el código de    servicio.                         versión de la estrategia no se                                                                                                                                                
                 Dinamismo)        "ESTRATEGIA-ACTUALIZABLE" en                                   aplica hasta un reinicio o                                                                                                                                                    
                                   MongoDB. 3. Intentar                                           recarga explícita. Se registra                                                                                                                                                
                                   calcular un tiempo de                                          una advertencia si el sistema                                                                                                                                                 
                                   preparación con el Strategy                                    detecta un cambio sin un                                                                                                                                                      
                                   Pattern.                                                       mecanismo de recarga.                                                                                                                                                         

  CP-US022-011   Carga de          1\. Iniciar el microservicio MongoDB: Dos documentos de        El microservicio carga solo una                                                                                                                                               
                 estrategias con   Node.js. 2. El microservicio estrategia con el mismo ID        de las estrategias (ej. la                                                                                                                                                    
                 nombres o IDs     intenta cargar las           "ESTRATEGIA-DUPLICADA" pero       primera encontrada) o rechaza la                                                                                                                                              
                 duplicados (EG -  estrategias.                 diferente código.                 carga. Se registra un error o                                                                                                                                                 
                 Consistencia de                                                                  advertencia sobre los IDs de                                                                                                                                                  
                 Datos)                                                                           estrategia duplicados. El                                                                                                                                                     
                                                                                                  microservicio utiliza la                                                                                                                                                      
                                                                                                  estrategia cargada (o fallback)                                                                                                                                               
                                                                                                  para los cálculos.                                                                                                                                                            

  CP-US022-012   Comportamiento    1\. Iniciar el microservicio Entorno: Fallo crítico en la      El microservicio lanza una                                                                                                                                                    
                 del microservicio Node.js. 2. El Strategy      inicialización del Strategy       excepción controlada o utiliza un                                                                                                                                             
                 si el Strategy    Pattern falla al inicializar Pattern.                          mecanismo de cálculo de tiempo de                                                                                                                                             
                 Pattern no puede  (debido a errores críticos                                     emergencia. Se registra un error                                                                                                                                              
                 inicializarse     en todas las estrategias o                                     crítico indicando la falla en la                                                                                                                                              
                 (EG - Robustez)   en su contexto). 3. El                                         inicialización del Strategy                                                                                                                                                   
                                   microservicio intenta                                          Pattern. El microservicio puede                                                                                                                                               
                                   calcular un tiempo de                                          continuar operando otras partes                                                                                                                                               
                                   preparación.                                                   de su lógica.                                                                                                                                                                 
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## US-018

  ----------------------------------------------------------------------------------------------------
  ID             Descripción           Pasos              Datos de Entrada         Resultado Esperado
  -------------- --------------------- ------------------ ------------------------ -------------------
  CP-US018-001   Intento de edición de 1\. Visualizar el  ID de Pedido:            La interfaz muestra
                 pedido en estado      pedido             PEDIDO-001. Estado       el mensaje de
                 "preparing" (STT -    "PEDIDO-001" en la Inicial: preparing.      error: "No se puede
                 Transición Inválida)  interfaz. 2.                                editar un pedido en
                                       Intentar acceder a                          curso". La edición
                                       la opción/botón de                          no es permitida. El
                                       edición del                                 estado y detalles
                                       pedido.                                     del pedido en DB
                                                                                   (MongoDB) no
                                                                                   cambian.

  CP-US018-002   Intento de edición de 1\. Visualizar el  ID de Pedido:            La interfaz muestra
                 pedido en estado      pedido             PEDIDO-002. Estado       el mensaje de
                 "ready" (STT -        "PEDIDO-002" en la Inicial: ready.          error: "No se puede
                 Transición Inválida)  interfaz. 2.                                editar un pedido en
                                       Intentar acceder a                          curso". La edición
                                       la opción/botón de                          no es permitida. El
                                       edición del                                 estado y detalles
                                       pedido.                                     del pedido en DB
                                                                                   (MongoDB) no
                                                                                   cambian.

  CP-US018-003   Intento de edición de 1\. Visualizar el  ID de Pedido:            La interfaz muestra
                 pedido en estado      pedido             PEDIDO-003. Estado       un mensaje de
                 "completed" (STT -    "PEDIDO-003" en la Inicial: completed.      error: "No se puede
                 Transición Inválida / interfaz. 2.                                editar un pedido en
                 EG - Extensión de     Intentar acceder a                          curso" (o similar
                 Regla)                la opción/botón de                          para "completado").
                                       edición del                                 La edición no es
                                       pedido.                                     permitida. El
                                                                                   estado y detalles
                                                                                   del pedido en DB
                                                                                   (MongoDB) no
                                                                                   cambian.

  CP-US018-004   Verificación de       1\. Intentar       ID de Pedido:            El mensaje de error
                 mensaje de error      editar el pedido   PEDIDO-004. Estado:      mostrado es
                 correcto para estado  "PEDIDO-004" a     preparing.               exactamente "No se
                 "preparing" (EG -     través de la                                puede editar un
                 Mensaje Específico)   interfaz.                                   pedido en curso".
                                                                                   Ninguna interacción
                                                                                   de edición es
                                                                                   permitida.

  CP-US018-005   Verificación de       1\. Intentar       ID de Pedido:            El mensaje de error
                 mensaje de error      editar el pedido   PEDIDO-005. Estado:      mostrado es
                 correcto para estado  "PEDIDO-005" a     ready.                   exactamente "No se
                 "ready" (EG - Mensaje través de la                                puede editar un
                 Específico)           interfaz.                                   pedido en curso".
                                                                                   Ninguna interacción
                                                                                   de edición es
                                                                                   permitida.

  CP-US018-006   Intento de edición de 1\. Visualizar el  ID de Pedido:            La interfaz muestra
                 campos específicos en pedido             PEDIDO-006. Estado:      el mensaje de
                 estado "preparing"    "PEDIDO-006" en la preparing. Datos de      error: "No se puede
                 (EG - Campos          interfaz. 2.       modificación: Nuevos     editar un pedido en
                 Individuales)         Intentar modificar valores para             curso". Ninguna
                                       el nombre del      cliente/mesa/cantidad.   modificación se
                                       cliente, el número                          guarda. El pedido
                                       de mesa o la                                en DB (MongoDB)
                                       cantidad de un                              permanece sin
                                       ítem. 3. Intentar                           cambios.
                                       guardar la                                  
                                       modificación.                               

  CP-US018-007   Intento de edición de 1\. Visualizar el  ID de Pedido:            La interfaz muestra
                 campos específicos en pedido             PEDIDO-007. Estado:      el mensaje de
                 estado "ready" (EG -  "PEDIDO-007" en la ready. Datos de          error: "No se puede
                 Campos Individuales)  interfaz. 2.       modificación: Ítem       editar un pedido en
                                       Intentar añadir un nuevo/eliminado,         curso". Ninguna
                                       nuevo ítem,        Comentario nuevo.        modificación se
                                       eliminar uno                                guarda. El pedido
                                       existente o                                 en DB (MongoDB)
                                       cambiar un                                  permanece sin
                                       comentario. 3.                              cambios.
                                       Intentar guardar                            
                                       la modificación.                            

  CP-US018-008   Comportamiento de la  1\. Visualizar la  ID de Pedido:            El botón o la
                 interfaz: Botón de    lista de pedidos   PEDIDO-008. Estado:      opción para editar
                 edición deshabilitado en la interfaz. 2. preparing.               el pedido
                 para estado           Localizar el                                "PEDIDO-008" está
                 "preparing" (EG -     pedido                                      deshabilitado o no
                 Usabilidad)           "PEDIDO-008".                               es visible.

  CP-US018-009   Comportamiento de la  1\. Visualizar la  ID de Pedido:            El botón o la
                 interfaz: Botón de    lista de pedidos   PEDIDO-009. Estado:      opción para editar
                 edición deshabilitado en la interfaz. 2. ready.                   el pedido
                 para estado "ready"   Localizar el                                "PEDIDO-009" está
                 (EG - Usabilidad)     pedido                                      deshabilitado o no
                                       "PEDIDO-009".                               es visible.

  CP-US018-010   Intento de edición de 1\. Intentar       ID de Pedido: PEDIDO-010 La interfaz muestra
                 un pedido inexistente acceder a la       (Inexistente).           un mensaje de error
                 (EG - Datos           edición de un                               (ej. "Pedido no
                 Inválidos)            pedido con ID                               encontrado"). No se
                                       "PEDIDO-010" (ej.                           permite ninguna
                                       mediante URL                                modificación.
                                       directa o entrada                           
                                       manual).                                    

  CP-US018-011   Intento de edición de 1\. Visualizar el  ID de Pedido:            La interfaz de
                 un pedido "pending"   pedido             PEDIDO-011. Estado:      usuario permite la
                 (Validación del flujo "PEDIDO-011" en la pending.                 edición del pedido
                 opuesto, US-017)      interfaz. 2.                                "PEDIDO-011". No se
                                       Intentar acceder a                          muestra ningún
                                       la opción/botón de                          mensaje de error de
                                       edición del                                 restricción de
                                       pedido.                                     estado.

  CP-US018-012   Falla de comunicación 1\. Simular la     ID de Pedido:            La interfaz muestra
                 con el backend al     falla de conexión  PEDIDO-012. Estado:      un mensaje de error
                 intentar editar (EG - entre UI y el      preparing. Conexión      relacionado con la
                 Resiliencia)          microservicio      Backend: Falla.          conexión/servidor
                                       (Node.js). 2.                               (ej. "Error de
                                       Intentar editar el                          comunicación con el
                                       pedido                                      servidor"). La
                                       "PEDIDO-012" a                              modificación del
                                       través de la                                pedido no se lleva
                                       interfaz.                                   a cabo.

  CP-US018-013   Intento de bypass de  1\. Enviar         ID de Pedido:            El microservicio de
                 la UI para editar un  directamente una   PEDIDO-013. Estado:      cocina rechaza la
                 pedido "preparing"    solicitud de       preparing. Solicitud de  solicitud de
                 (EG -                 actualización al   Actualización: Directa   actualización. El
                 Seguridad/Robustez)   microservicio      al Backend.              estado y detalles
                                       (Node.js),                                  del pedido en DB
                                       simulando el                                permanecen
                                       mesero.                                     inalterados. Se
                                                                                   registra un
                                                                                   error/advertencia
                                                                                   en los logs del
                                                                                   backend.

  CP-US018-014   Concurrencia: Pedido  1\. Mesero intenta ID de Pedido:            El sistema detecta
                 cambia a "preparing"  editar el pedido   PEDIDO-014. Estado       el cambio de estado
                 justo antes de la     "PEDIDO-014"       Inicial: pending. Estado concurrente. La
                 edición (EG -         (Estado: pending). Concurrente: preparing.  interfaz muestra el
                 Concurrencia)         2.                                          mensaje de error:
                                       Simultáneamente,                            "No se puede editar
                                       el estado cambia a                          un pedido en
                                       "preparing" (por                            curso". La
                                       acción de                                   modificación del
                                       cocinero). 3.                               pedido no se lleva
                                       Sistema verifica                            a cabo.
                                       el estado antes de                          
                                       guardar la edición                          
                                       del mesero.                                 
  ----------------------------------------------------------------------------------------------------

## US-023

  -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  ID             Descripción       Pasos                                                         Datos de Entrada                                             Resultado Esperado     None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None   None
  -------------- ----------------- ------------------------------------------------------------- ------------------------------------------------------------ ---------------------- ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------ ------
  CP-US023-001   Creación exitosa  1\. Acceder a la sección de "Gestión de Roles".2. Crear un    Nombre del rol: "Jefe de Cocina", Permisos: \["ver historial El rol "Jefe de                                                                                                                                                    
                 de un nuevo rol   nuevo rol.3. Ingresar el nombre del rol: "Jefe de Cocina".4.  de pedidos", "editar menú"\]                                 Cocina" se guarda                                                                                                                                                  
                 con permisos      Asignar los permisos "ver historial de pedidos" y "editar                                                                  correctamente en el                                                                                                                                                
                 (EP - Partición   menú".                                                                                                                     sistema.El rol "Jefe                                                                                                                                               
                 Válida)                                                                                                                                      de Cocina" está                                                                                                                                                    
                                                                                                                                                              disponible en la lista                                                                                                                                             
                                                                                                                                                              de roles para                                                                                                                                                      
                                                                                                                                                              asignación.Los                                                                                                                                                     
                                                                                                                                                              permisos asignados se                                                                                                                                              
                                                                                                                                                              asocian correctamente                                                                                                                                              
                                                                                                                                                              al rol.                                                                                                                                                            

  CP-US023-002   Creación exitosa  1\. Acceder a la sección de "Gestión de Roles".2. Crear un    Nombre del rol: "Personal de Limpieza", Permisos: Ninguno    El rol "Personal de                                                                                                                                                
                 de un nuevo rol   nuevo rol.3. Ingresar el nombre del rol: "Personal de                                                                      Limpieza" se guarda                                                                                                                                                
                 sin permisos      Limpieza".4. No asignar ningún permiso.                                                                                    correctamente en el                                                                                                                                                
                 iniciales (EP -                                                                                                                              sistema.El rol                                                                                                                                                     
                 Partición Válida)                                                                                                                            "Personal de Limpieza"                                                                                                                                             
                                                                                                                                                              está disponible en la                                                                                                                                              
                                                                                                                                                              lista de roles para                                                                                                                                                
                                                                                                                                                              asignación.El rol no                                                                                                                                               
                                                                                                                                                              tiene permisos                                                                                                                                                     
                                                                                                                                                              asociados.                                                                                                                                                         

  CP-US023-003   Intento de crear  1\. Intentar crear un nuevo rol.2. Ingresar el nombre del     Nombre del rol a crear: "Mesero", Rol existente: "Mesero",   El sistema muestra un                                                                                                                                              
                 un rol con nombre rol: "Mesero" (ya existente).3. Asignar algunos permisos.     Permisos a asignar: (algunos)                                mensaje de error: "Ya                                                                                                                                              
                 duplicado                                                                                                                                    existe un rol con este                                                                                                                                             
                 (Adivinación de                                                                                                                              nombre".El nuevo rol                                                                                                                                               
                 Errores)                                                                                                                                     no se crea.El rol                                                                                                                                                  
                                                                                                                                                              "Mesero" existente                                                                                                                                                 
                                                                                                                                                              permanece inalterado.                                                                                                                                              

  CP-US023-004   Intento de crear  1\. Acceder a la sección de "Gestión de Roles".2. Intentar    Nombre del rol: vacío o " " (solo espacios), Permisos a      El sistema muestra un                                                                                                                                              
                 un rol con nombre crear un nuevo rol.3. Ingresar el nombre del rol: vacío o     asignar: (algunos)                                           mensaje de error: "El                                                                                                                                              
                 vacío (BVA -      solo espacios en blanco.4. Asignar algunos permisos.                                                                       nombre del rol no                                                                                                                                                  
                 Límite Inferior /                                                                                                                            puede estar vacío".El                                                                                                                                              
                 Adivinación de                                                                                                                               nuevo rol no se crea.                                                                                                                                              
                 Errores)                                                                                                                                                                                                                                                                                                        

  CP-US023-005   Intento de crear  1\. Intentar crear un nuevo rol.2. Ingresar el nombre del     Longitud máxima permitida: 50 caracteres, Nombre del rol:    El sistema muestra un                                                                                                                                              
                 un rol con nombre rol:                                                          "EsteEsUnNombreDeRolExtremadamenteLargoParaProbarElLimite"   mensaje de error: "El                                                                                                                                              
                 que excede la     "EsteEsUnNombreDeRolExtremadamenteLargoParaProbarElLimite".   (51 caracteres)                                              nombre del rol excede                                                                                                                                              
                 longitud máxima                                                                                                                              la longitud máxima                                                                                                                                                 
                 (BVA - Límite                                                                                                                                permitida".El nuevo                                                                                                                                                
                 Superior /                                                                                                                                   rol no se crea.                                                                                                                                                    
                 Adivinación de                                                                                                                                                                                                                                                                                                  
                 Errores)                                                                                                                                                                                                                                                                                                        

  CP-US023-006   Asignación de     1\. Acceder a la sección de "Gestión de Roles".2. Crear un    Nombre del rol: "Super Usuario", Cantidad de permisos        El rol "Super Usuario"                                                                                                                                             
                 todos los         nuevo rol.3. Ingresar el nombre del rol: "Super Usuario".4.   disponibles: 10, Permisos asignados: (los 10 disponibles)    se guarda                                                                                                                                                          
                 permisos          Asignar los 10 permisos disponibles en el sistema.                                                                         correctamente en el                                                                                                                                                
                 disponibles a un                                                                                                                             sistema.Todos los                                                                                                                                                  
                 nuevo rol (BVA -                                                                                                                             permisos se asocian                                                                                                                                                
                 Límite Superior)                                                                                                                             correctamente al rol.                                                                                                                                              

  CP-US023-007   Creación de rol   1\. Acceder a la sección de "Gestión de Roles".2. Crear un    Nombre del rol: "Cocinero-Auxiliar!", Caracteres especiales: El rol                                                                                                                                                             
                 con caracteres    nuevo rol.3. Ingresar el nombre del rol:                      \["-", "!"\]                                                 "Cocinero-Auxiliar!"                                                                                                                                               
                 especiales en el  "Cocinero-Auxiliar!".4. Asignar algunos permisos.                                                                          se guarda                                                                                                                                                          
                 nombre                                                                                                                                       correctamente en el                                                                                                                                                
                 (Adivinación de                                                                                                                              sistema (asumiendo que                                                                                                                                             
                 Errores)                                                                                                                                     los caracteres                                                                                                                                                     
                                                                                                                                                              especiales son                                                                                                                                                     
                                                                                                                                                              permitidos según la                                                                                                                                                
                                                                                                                                                              especificación).El rol                                                                                                                                             
                                                                                                                                                              está disponible para                                                                                                                                               
                                                                                                                                                              asignación.                                                                                                                                                        

  CP-US023-008   Falla en la       1\. Intentar crear un nuevo rol.2. Confirmar la creación del  Falla simulada: Conexión a la base de datos de roles         El sistema muestra un                                                                                                                                              
                 persistencia del  rol (simulando una falla de conexión DB).                                                                                  mensaje de error:                                                                                                                                                  
                 rol en la base de                                                                                                                            "Error al guardar el                                                                                                                                               
                 datos                                                                                                                                        rol. Intente de nuevo                                                                                                                                              
                 (Adivinación de                                                                                                                              más tarde."El rol no                                                                                                                                               
                 Errores -                                                                                                                                    se crea en la base de                                                                                                                                              
                 Resiliencia)                                                                                                                                 datos.Se registra un                                                                                                                                               
                                                                                                                                                              error en los logs del                                                                                                                                              
                                                                                                                                                              sistema.                                                                                                                                                           

  CP-US023-009   Edición de        1\. Acceder a la edición del rol "Mesero".2. Añadir el        Rol existente: "Mesero", Permisos iniciales: \["tomar        El rol "Mesero" se                                                                                                                                                 
                 permisos de un    permiso "ver estado de pedidos".3. Eliminar el permiso        pedidos", "gestionar mesas"\], Permiso añadido: "ver estado  actualiza                                                                                                                                                          
                 rol existente     "gestionar mesas".                                            de pedidos", Permiso eliminado: "gestionar mesas"            correctamente en el                                                                                                                                                
                 (Adivinación de                                                                                                                              sistema.Sus permisos                                                                                                                                               
                 Errores -                                                                                                                                    son ahora "tomar                                                                                                                                                   
                 Modificación)                                                                                                                                pedidos" y "ver estado                                                                                                                                             
                                                                                                                                                              de pedidos".                                                                                                                                                       

  CP-US023-010   Eliminación de un 1\. Acceder a la sección de "Gestión de Roles".2. Seleccionar Rol a eliminar: "Personal de Limpieza", Asignaciones de      El rol "Personal de                                                                                                                                                
                 rol existente que el rol "Personal de Limpieza".3. Eliminar el rol.             usuario: 0                                                   Limpieza" se elimina                                                                                                                                               
                 no está asignado                                                                                                                             correctamente del                                                                                                                                                  
                 a ningún usuario                                                                                                                             sistema.Ya no está                                                                                                                                                 
                 (Adivinación de                                                                                                                              disponible en la lista                                                                                                                                             
                 Errores -                                                                                                                                    de roles.                                                                                                                                                          
                 Eliminación)                                                                                                                                                                                                                                                                                                    

  CP-US023-011   Intento de        1\. Intentar eliminar el rol "Mesero".                        Rol a eliminar: "Mesero", Usuarios asignados: 5              El sistema muestra un                                                                                                                                              
                 eliminar un rol                                                                                                                              mensaje de error: "No                                                                                                                                              
                 que está asignado                                                                                                                            se puede eliminar el                                                                                                                                               
                 a usuarios                                                                                                                                   rol 'Mesero' porque                                                                                                                                                
                 (Adivinación de                                                                                                                              está asignado a                                                                                                                                                    
                 Errores -                                                                                                                                    usuarios".El rol                                                                                                                                                   
                 Restricción de                                                                                                                               "Mesero" y sus                                                                                                                                                     
                 Eliminación)                                                                                                                                 asignaciones de                                                                                                                                                    
                                                                                                                                                              usuario permanecen                                                                                                                                                 
                                                                                                                                                              inalterados.                                                                                                                                                       

  CP-US023-012   Asignación        1\. Acceder al perfil de "Juan Pérez".2. Asignar el rol de    Usuario: "Juan Pérez", Roles iniciales: Ninguno, Rol a       El rol "Mesero" se                                                                                                                                                 
                 exitosa de un rol "Mesero".3. "Juan Pérez" intenta acceder a la capacidad       asignar: "Mesero", Capacidad permitida a verificar: "tomar   asocia correctamente                                                                                                                                               
                 a un usuario      "tomar pedidos" o "gestionar mesas".                          pedidos" o "gestionar mesas"                                 al usuario "Juan                                                                                                                                                   
                 nuevo (EP -                                                                                                                                  Pérez"."Juan Pérez"                                                                                                                                                
                 Partición Válida)                                                                                                                            puede acceder a las                                                                                                                                                
                                                                                                                                                              capacidades permitidas                                                                                                                                             
                                                                                                                                                              para el rol "Mesero"                                                                                                                                               
                                                                                                                                                              (ej. tomar pedidos,                                                                                                                                                
                                                                                                                                                              gestionar mesas).                                                                                                                                                  

  CP-US023-013   Asignación        1\. Acceder al perfil de "Ana López".2. Asignar el rol de     Usuario: "Ana López", Rol inicial: "Cocinero", Rol adicional El usuario "Ana López"                                                                                                                                             
                 exitosa de un     "Jefe de Cocina" adicionalmente.                              a asignar: "Jefe de Cocina"                                  tiene ahora los roles                                                                                                                                              
                 segundo rol a un                                                                                                                             "Cocinero" y "Jefe de                                                                                                                                              
                 usuario (EP -                                                                                                                                Cocina"."Ana López"                                                                                                                                                
                 Partición Válida)                                                                                                                            puede acceder a las                                                                                                                                                
                                                                                                                                                              capacidades de ambos                                                                                                                                               
                                                                                                                                                              roles (ej. cambiar                                                                                                                                                 
                                                                                                                                                              estado de pedido, ver                                                                                                                                              
                                                                                                                                                              historial de pedidos,                                                                                                                                              
                                                                                                                                                              editar menú).                                                                                                                                                      

  CP-US023-014   Intento de        1\. Intentar asignar el rol "Rol Inexistente" al usuario      Usuario: "Pedro Gómez", Rol a asignar: "Rol Inexistente"     El sistema muestra un                                                                                                                                              
                 asignar un rol    "Pedro Gómez".                                                                                                             mensaje de error: "El                                                                                                                                              
                 inexistente a un                                                                                                                             rol 'Rol Inexistente'                                                                                                                                              
                 usuario                                                                                                                                      no existe".El usuario                                                                                                                                              
                 (Adivinación de                                                                                                                              "Pedro Gómez" no tiene                                                                                                                                             
                 Errores)                                                                                                                                     asignado el rol "Rol                                                                                                                                               
                                                                                                                                                              Inexistente".Sus roles                                                                                                                                             
                                                                                                                                                              existentes permanecen                                                                                                                                              
                                                                                                                                                              inalterados.                                                                                                                                                       

  CP-US023-015   Intento de        1\. Intentar asignar el rol "Mesero" a un usuario con el      Rol a asignar: "Mesero", Usuario: "Usuario Inexistente"      El sistema muestra un                                                                                                                                              
                 asignar un rol a  nombre "Usuario Inexistente".                                                                                              mensaje de error: "El                                                                                                                                              
                 un usuario                                                                                                                                   usuario 'Usuario                                                                                                                                                   
                 inexistente                                                                                                                                  Inexistente' no fue                                                                                                                                                
                 (Adivinación de                                                                                                                              encontrado".El rol no                                                                                                                                              
                 Errores)                                                                                                                                     se asigna.                                                                                                                                                         

  CP-US023-016   Desasignación de  1\. Acceder al perfil de "Carlos Ruiz".2. Desasignar el rol   Usuario: "Carlos Ruiz", Roles iniciales: \["Mesero",         El usuario "Carlos                                                                                                                                                 
                 un rol a un       "Cocinero".                                                   "Cocinero"\], Rol a desasignar: "Cocinero"                   Ruiz" tiene ahora solo                                                                                                                                             
                 usuario                                                                                                                                      el rol                                                                                                                                                             
                 (Adivinación de                                                                                                                              "Mesero"."Carlos Ruiz"                                                                                                                                             
                 Errores -                                                                                                                                    ya no puede acceder a                                                                                                                                              
                 Modificación)                                                                                                                                las capacidades                                                                                                                                                    
                                                                                                                                                              exclusivas del rol                                                                                                                                                 
                                                                                                                                                              "Cocinero".                                                                                                                                                        

  CP-US023-017   Desasignación del 1\. Acceder al perfil de "Laura Sol".2. Desasignar el rol     Usuario: "Laura Sol", Rol inicial: "Mesero", Rol a           El usuario "Laura Sol"                                                                                                                                             
                 último rol de un  "Mesero".                                                     desasignar: "Mesero"                                         no tiene ningún rol                                                                                                                                                
                 usuario                                                                                                                                      asignado."Laura Sol"                                                                                                                                               
                 (Adivinación de                                                                                                                              no puede acceder a                                                                                                                                                 
                 Errores -                                                                                                                                    ninguna capacidad                                                                                                                                                  
                 Modificación)                                                                                                                                restringida por roles.                                                                                                                                             

  CP-US023-018   Falla en la       1\. Intentar asignar un rol a un usuario.2. Confirmar la      Falla simulada: Conexión a la base de datos de usuarios      El sistema muestra un                                                                                                                                              
                 persistencia de   asignación del rol (simulando una falla de conexión DB).                                                                   mensaje de error:                                                                                                                                                  
                 la asignación de                                                                                                                             "Error al guardar la                                                                                                                                               
                 rol en la base de                                                                                                                            asignación del rol.                                                                                                                                                
                 datos                                                                                                                                        Intente de nuevo más                                                                                                                                               
                 (Adivinación de                                                                                                                              tarde."El rol no se                                                                                                                                                
                 Errores -                                                                                                                                    asigna al usuario en                                                                                                                                               
                 Resiliencia)                                                                                                                                 la base de datos.Se                                                                                                                                                
                                                                                                                                                              registra un error en                                                                                                                                               
                                                                                                                                                              los logs del sistema.                                                                                                                                              

  CP-US023-019   Verificación de   1\. "Juan Pérez" intenta acceder a la capacidad "tomar        Usuario: "Juan Pérez", Rol asignado: "Mesero", Permisos del  "Juan Pérez" puede                                                                                                                                                 
                 acceso a          pedidos".2. "Juan Pérez" intenta acceder a la capacidad       rol: \["tomar pedidos", "gestionar mesas"\], Capacidad       acceder a la capacidad                                                                                                                                             
                 capacidades       "editar menú".                                                permitida a verificar: "tomar pedidos", Capacidad denegada a "tomar pedidos"."Juan                                                                                                                                              
                 después de                                                                      verificar: "editar menú"                                     Pérez" no puede                                                                                                                                                    
                 asignación de rol                                                                                                                            acceder a la capacidad                                                                                                                                             
                 (EP - Partición                                                                                                                              "editar menú" y el                                                                                                                                                 
                 Válida)                                                                                                                                      sistema muestra un                                                                                                                                                 
                                                                                                                                                              mensaje de "Acceso                                                                                                                                                 
                                                                                                                                                              Denegado".                                                                                                                                                         

  CP-US023-020   Verificación de   1\. "Ana López" intenta acceder a la capacidad "cambiar       Usuario: "Ana López", Roles actuales: Ninguno, Capacidad a   "Ana López" no puede                                                                                                                                               
                 acceso a          estado de pedido".                                            verificar (anteriormente permitida por "Cocinero"): "cambiar acceder a la capacidad                                                                                                                                             
                 capacidades                                                                     estado de pedido"                                            "cambiar estado de                                                                                                                                                 
                 después de                                                                                                                                   pedido".El sistema                                                                                                                                                 
                 desasignación de                                                                                                                             muestra un mensaje de                                                                                                                                              
                 rol (EP -                                                                                                                                    "Acceso Denegado".                                                                                                                                                 
                 Partición Válida)                                                                                                                                                                                                                                                                                               

  CP-US023-021   Concurrencia:     1\. Admin1 intenta asignar el rol "Mesero" a "Roberto         Usuario: "Roberto Blanco", Rol a asignar por Admin1:         El sistema maneja la                                                                                                                                               
                 Múltiples         Blanco".2. Admin2 intenta simultáneamente asignar el rol      "Mesero", Rol a asignar por Admin2: "Cocinero", Operación:   concurrencia                                                                                                                                                       
                 administradores   "Cocinero" a "Roberto Blanco".                                Asignación simultánea                                        correctamente.El                                                                                                                                                   
                 asignando roles                                                                                                                              usuario "Roberto                                                                                                                                                   
                 al mismo usuario                                                                                                                             Blanco" termina con                                                                                                                                                
                 (Adivinación de                                                                                                                              ambos roles "Mesero" y                                                                                                                                             
                 Errores -                                                                                                                                    "Cocinero"                                                                                                                                                         
                 Concurrencia)                                                                                                                                asignados.No hay                                                                                                                                                   
                                                                                                                                                              pérdida de datos ni                                                                                                                                                
                                                                                                                                                              errores de                                                                                                                                                         
                                                                                                                                                              consistencia.                                                                                                                                                      

  CP-US023-022   Concurrencia:     1\. Admin1 intenta desasignar el rol "Mesero" a "Elena        Usuario: "Elena Mora", Rol actual: "Mesero", Operación 1:    El sistema debe                                                                                                                                                    
                 Asignación y      Mora".2. Admin2 intenta simultáneamente eliminar el rol       Desasignar "Mesero" a "Elena Mora", Operación 2: Eliminar    priorizar la                                                                                                                                                       
                 eliminación de un "Mesero" del sistema.                                         rol "Mesero", Operación: Concurrencia entre desasignación y  restricción: el rol no                                                                                                                                             
                 rol                                                                             eliminación                                                  puede ser eliminado si                                                                                                                                             
                 simultáneamente                                                                                                                              está asignado.La                                                                                                                                                   
                 (Adivinación de                                                                                                                              desasignación del rol                                                                                                                                              
                 Errores -                                                                                                                                    a "Elena Mora" se                                                                                                                                                  
                 Concurrencia)                                                                                                                                procesa primero o se                                                                                                                                               
                                                                                                                                                              maneja el conflicto.El                                                                                                                                             
                                                                                                                                                              rol "Mesero" no se                                                                                                                                                 
                                                                                                                                                              elimina del sistema                                                                                                                                                
                                                                                                                                                              hasta que no esté                                                                                                                                                  
                                                                                                                                                              asignado a ningún                                                                                                                                                  
                                                                                                                                                              usuario.Se registra                                                                                                                                                
                                                                                                                                                              una advertencia o                                                                                                                                                  
                                                                                                                                                              error si hay un                                                                                                                                                    
                                                                                                                                                              conflicto de                                                                                                                                                       
                                                                                                                                                              concurrencia.                                                                                                                                                      
  -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
